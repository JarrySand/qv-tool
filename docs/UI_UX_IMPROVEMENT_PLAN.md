# QV-Tool UI/UX改善計画書

## 📋 概要

本ドキュメントは、QV-Tool のUI/UX改善を実装するためのToDoリストです。
提案書（`UI_UX_IMPROVEMENT_PROPOSAL.md`）に基づいて作成されています。

**目的**: 多くの人がQV（Quadratic Voting）の価値を感じてもらうこと

---

## ✅ 完了済み

### 核心要素①: 二乗コストの体感的可視化

- [x] **正方形コストビジュアライザー** (`square-cost-visualizer.tsx`)
  - 投票数に応じた正方形グリッド表示
  - 最大10×10まで表示可能
  - 固定サイズコンテナでレイアウト安定
  - `n × n = コスト` のラベル表示

- [x] **投票画面への統合**
  - 各選択肢カードに正方形ビジュアル表示
  - 投票ボタン位置が固定（正方形サイズに依存しない）
  - +1票時のコスト増分表示

---

## ✅ Phase 1: 核心機能（完了）

### 核心要素②: 多様性の反映の可視化

結果ページに「一人一票」との比較機能を追加し、QVの価値を可視化する。

**コンセプト**: 
> 「一人一票だったら、どれだけの選好が埋もれていたか？」

一人一票では各投票者は1つの選択肢にしか投票できないが、QVでは複数に分散投票できる。
その差分＝「埋もれていた選好」を可視化する。

- [x] **一人一票シミュレーションロジック実装**
  - ファイル: `src/lib/actions/result.ts`
  - 各投票者の1位（最大票数）選択肢を特定
  - 1位には1票、2位以下は「埋もれた選好」としてカウント

- [x] **埋もれた選好の計算ロジック**
  - ファイル: `src/lib/actions/result.ts`
  - 2位以下への投票のみを「埋もれた選好」として計算
  - 1位への投票は一人一票でも反映されるため除外

- [x] **一人一票 vs QV 比較チャートコンポーネント**
  - ファイル: `src/components/features/voting-comparison-chart.tsx`
  - 左: 一人一票の結果（各投票者の1位のみ）
  - 右: QVの結果（分散投票を反映）
  - 差分を視覚的に表示
  - 「見えなかった選好」のサマリー表示

- [x] **「埋もれた選好」表示コンポーネント**
  - `VotingComparisonChart` に統合
  - 「一人一票では○○票分の選好が見えませんでした」
  - 各選択肢で「見えなかった選好」をリスト表示

- [x] **結果ページへの統合**
  - ファイル: `src/components/features/live-result-container.tsx`
  - 比較チャートセクション追加
  - 埋もれた選好の可視化

---

## ✅ Phase 2: ホームページ改善（完了）

### 二乗コスト教育アニメーション

- [x] **インタラクティブQVデモコンポーネント**
  - ファイル: `src/components/features/quadratic-explainer.tsx`
  - 自動デモアニメーション（1票→2票→3票→4票→5票→...ループ）
  - 通常投票 vs 二次投票の比較表示
  - 再生/一時停止ボタン
  - 手動クリックで票数選択可能
  - 日英両言語対応

- [x] **ホームページへの統合**
  - ファイル: `src/app/page.tsx`
  - Featuresセクション下に教育セクション追加
  - 「二次投票の仕組み」タイトル付き

---

## 📌 Phase 3: デザイン洗練（優先度: 中）

### カラーパレット改善

選択肢:
- A: Midnight Gold（現行強化版）
- B: Ocean Horizon（ブルー系）
- C: Digital Sakura（和モダン）
- D: Neon Cyber（フューチャリスティック）

- [ ] **カラーパレット決定**
  - 上記から1つ選択

- [ ] **CSS変数更新**
  - ファイル: `src/app/globals.css`
  - ライトモード・ダークモード両方

### タイポグラフィ改善

選択肢:
- A: Classic Modern（Satoshi + Inter）
- B: Bold Statement（Clash Display）
- C: Elegant Serif（Fraunces）
- D: Tech Forward（Archivo Black）

- [ ] **フォント決定**
  - 上記から1つ選択

- [ ] **フォント導入**
  - ファイル: `src/app/layout.tsx`
  - Google Fonts または next/font

### アニメーション追加

- [ ] **ページトランジション**
  - フェードイン + スライドアップ
  - スタガード表示

- [ ] **結果チャートアニメーション**
  - バーが伸びるアニメーション
  - 順位発表時の演出

- [ ] **マイクロインタラクション**
  - ボタンホバー効果
  - 投票変更時のフィードバック

---

## 📌 Phase 4: アクセシビリティ（優先度: 中）

- [ ] **カラーコントラスト確認・修正**
  - WCAG AA準拠（4.5:1以上）
  - プレースホルダー、無効ボタンのコントラスト改善

- [ ] **キーボードナビゲーション強化**
  - 投票コントロールのキーボード操作
  - 矢印キーで投票数変更

- [ ] **スクリーンリーダー対応**
  - aria-live による投票状態通知
  - 適切なaria-label設定

---

## 📌 Phase 5: 追加機能（優先度: 低）

- [ ] **ウィザードUI改善**
  - ドラッグ&ドロップで候補並び替え
  - プログレスバー改善

- [ ] **サンキーダイアグラム**
  - 票の流れを可視化
  - 投票者→選択肢の関係図

- [ ] **PWA対応**
  - オフライン機能
  - ホーム画面追加

---

## 📊 実装優先度サマリー

| Phase | 内容 | 推定工数 | 状態 |
|-------|------|---------|--------|
| ✅ 完了 | 正方形コストビジュアライザー | - | ✅ 完了 |
| ✅ 1 | 多数決vsQV比較・多様性可視化 | 2-3日 | ✅ 完了 |
| ✅ 2 | ホームページ教育アニメーション | 1-2日 | ✅ 完了 |
| 3 | カラー・フォント・アニメーション | 2-3日 | 🟡 未着手 |
| 4 | アクセシビリティ強化 | 1-2日 | 🟡 未着手 |
| 5 | 追加機能 | 3-5日 | 🟢 未着手 |

---

## 📝 次のアクション

1. **Phase 3を開始**: カラーパレット・フォント選択
2. アニメーション追加
3. ユーザーテストで効果を検証

---

## 📁 作成・変更ファイル一覧

### Phase 1
- `src/lib/actions/result.ts` - HiddenPreferencesData追加、一人一票シミュレーション計算
- `src/components/features/voting-comparison-chart.tsx` - 比較チャートUI

### Phase 2
- `src/components/features/quadratic-explainer.tsx` - インタラクティブQVデモ

---

*作成日: 2025年11月27日*
*更新日: 2025年11月27日*
*ベース: UI_UX_IMPROVEMENT_PROPOSAL.md*

